# Production profile
# Activate with: spring.profiles.active=prod,prod-mysql
# Or: java -Dspring.profiles.active=prod,prod-mysql -jar backend.jar
# Or via env: $env:SPRING_PROFILES_ACTIVE="prod,prod-mysql"
#
# NOTE: You must activate both 'prod' and 'prod-mysql' profiles together
# The prod-mysql profile contains the MySQL database configuration
#
# Recommended env vars in production:
#   JWT_SECRET              - Strong secret for JWT (required)
#   SPRING_DATASOURCE_URL   - JDBC URL (format: jdbc:mysql://host:port/database)
#   SPRING_DATASOURCE_USERNAME / SPRING_DATASOURCE_PASSWORD
#   CORS_ALLOWED_ORIGINS    - Comma-separated frontend origins
#   API_BASE_URL            - Public base URL of this API
#   FRONTEND_URL            - Frontend URL for email links
#   MAIL_HOST, MAIL_PORT, MAIL_USERNAME, MAIL_PASSWORD
#   SERVER_PORT              - Optional; default 8081
#   JPA_DDL_AUTO             - validate (default) or update

# Server
server.port=${SERVER_PORT:5000}
#server.ssl.certificate=file:./ssl-selfsigned/cert.pem
#server.ssl.certificate-private-key=file:./ssl-selfsigned/key.pem
# JWT - MUST override in production with a strong secret (e.g. 32+ chars)
app.jwt.secret=${JWT_SECRET:change-me-in-production-use-long-random-string}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}

# Email - set MAIL_HOST, MAIL_PORT, MAIL_USERNAME, MAIL_PASSWORD in env
spring.mail.host=${MAIL_HOST:smtp.example.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
# Frontend URL for verification links
app.frontend.url=${FRONTEND_URL:https://https://alainegho.github.io/}

# Upload and API base URL - where this backend is reachable
app.upload.image-dir=${UPLOAD_IMAGE_DIR:uploads/images}
app.api.base-url=${API_BASE_URL:http://aegho.us-east-1.elasticbeanstalk.com:5000}

# CORS - comma-separated origins (e.g. https://your-app.com,https://www.your-app.com)
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://alainegho.github.io/,http://localhost:4200}

# Logging
logging.level.root=INFO
logging.level.com.example.backend=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN



# Database - Production MySQL configuration
spring.datasource.url=jdbc:mysql://localhost:3306/backend?useUnicode=true&characterEncoding=utf8
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=egho
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# In production prefer validate; use update only if you manage schema changes outside Flyway/Liquibase
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.show-sql=false

# Disable H2 console in production
spring.h2.console.enabled=true


